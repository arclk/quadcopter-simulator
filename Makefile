#------------------------------------------------------
# COMPILER TO USE
#------------------------------------------------------
CC = gcc

#------------------------------------------------------
# OPTION PASSED TO THE COMPILER
#------------------------------------------------------
CFLAGS = -Wall -Wextra -pedantic

#------------------------------------------------------
# LIBRARIES
#------------------------------------------------------
LIBS = -pthread `allegro-config --libs` -lm

#------------------------------------------------------
# COMPILING OPTIONS
#------------------------------------------------------
FIFO = -D FIFO
EDF = -D EDF

#-----------------------------------------------------
# DIRECTORIES
#-----------------------------------------------------
ODIR = obj
BDIR = bin
SRC = src

all: fifo edf

fifo: $(BDIR)/quad_fifo

edf: $(BDIR)/quad_edf

#-----------------------------------------------------
# GENERATING EXECUTABLES
#-----------------------------------------------------
$(BDIR)/quad_fifo: $(SRC)/quadcopters.c 	$(ODIR)/task.o
	$(CC) -o $@ $^ $(CFLAGS) $(FIFO) $(LIBS)

$(BDIR)/quad_edf: $(SRC)/quadcopters.c 	$(ODIR)/task.o
	$(CC) -o $@ $^ $(CFLAGS) $(EDF) $(LIBS)

#-----------------------------------------------------
# COMPILING OBJECT FILES
#-----------------------------------------------------
$(ODIR)/task.o: $(SRC)/ptask.c
	$(CC) -c -o $@ $^ $(CFLAGS) $(LIBS)

#-----------------------------------------------------
# CLEANING
#-----------------------------------------------------
clean:
	rm -f $(ODIR)/* $(BDIR)/*
